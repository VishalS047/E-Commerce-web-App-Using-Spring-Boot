<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head th:replace="fragments :: page_header('Categories - Shopify Admin')"></head>

<body>
		<div th:replace="navigationfragment ::  menu"></div>
		
		<div class="container-fluid">
			<h1 class="text-center">Manage Categories</h1>
			<a th:href="@{/categories/new}"><i class="fas fa-folder-plus fa-2x mr-2" ></i></a>
			&nbsp;
			<a th:href="@{/categories/export/csv}"><i class="fas fa-file-csv fa-2x" style="color:green;"></i></a>			
		</div>
				
		<!-- FOR SHOWING MESSAGES  -->
		<div th:if="${message!=null}" class="alert alert-success text-center m-3">
			[[${message}]]
		</div>
		
		<!-- IMPLEMENTING SEARCH BUTTON -->
		<div class="container-fluid">
			<form th:action="@{/categories/page/1}" class="form-inline float-right m-2">
				
				<input type="hidden" name="sortField" th:value="${sortField}">
				
				<input type="hidden" name="sortDir" th:value="${sortDir}">
				
				<h5>Search here</h5>&nbsp;
				
				<input type="search" id="search" required="required" name ="keyword" th:value="${keyword}" class="form-control"> &nbsp;
				
				<button type="submit" class="btn btn-primary m-1"><i class="fas fa-search"></i></button>
				&nbsp;
				<button type="button" onclick="clearFuntion()" class="btn btn-secondary m-1"><i class="fas fa-eraser"></i></button>
				
			</form>
		</div>
		
		
		<div  class="table-responsive full-details container-fluid">
			
			<table class="table table-dark table-striped table-bordered table-hover text-center">
			
				<thead>
					<tr>
						<th>ID</th>
						<th>Category Image</th>
						<th>Category Name</th>
						<th>Alias</th>
						<th>Enabled</th>
						<th>Options</th>
					</tr>
				</thead>
				
				<tbody>
					<tr th:each=" categories : ${listCategories}">
						<td>[[${categories.cid}]]</td>
						<td></td>
						<td>[[${categories.name}]]</td>
						<td>[[${categories.alias}]]</td>
						<td>
							<a th:if="${categories.isEnabled == true}" th:href="@{'/categories/' + ${categories.cid} +'/enabled/false'}" title="Disable this user" class="fas fa-check-circle colorEnabled"></a>
							
							<a th:if="${categories.isEnabled == false}" th:href="@{'/categories/' + ${categories.cid} +'/enabled/true'}" title="Enable this user" class="fas fa-times colorDisabled"></a>
						</td>
						<td>
							<a th:href="@{'/categories/edit/' +${categories.cid}}" class="fas fa-user-edit colorEdit" title="Edit this user">Edit</a>
							
							 &nbsp;
							 &nbsp; 
							 
							 <a th:href="@{'/categories/delete/' +${categories.cid}}" class="fas fa-user-times colorDelete " title="Delete this user" th:onclick="|deleteContact(${categories.cid})|">Delete</a>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		
		<div th:replace="fragments :: footer"></div>
		
		
		<script type="text/javascript">
		
		function deleteContact(id) {
			
				console.log("Contact deleted")
				swal({
					title: "Are you sure?",
					text: "Do you want to delete this contact with ID:" + id + "?",
					icon: "warning",
					buttons: true,
					dangerMode: true,
				})
				.then((willDelete) => {
					if (willDelete) {
						window.location = "/user/delete/"+id;
					} else {
						swal("Your contact is safe!");
					}
				});
		};
		
		function clearFuntion() {
			window.location = "[[@{/users}]]";
		}
	</script>
</body>
</html>